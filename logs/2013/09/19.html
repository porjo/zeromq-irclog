<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Zeromq-irclog : IRC Log repository for ZeroMQ" />

    <link rel="stylesheet" type="text/css" media="screen" href="/zeromq-irclog/stylesheets/stylesheet.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.1.0/moment.min.js"></script>

    <title>Zeromq-irclog</title>

    <style>
	    #msgtablediv {
		margin-left: 20px;
		margin-right: 20px;
	    }
	    #msgtable {
		    width: 100%;
		    border: 0;
		    padding: 0;
	    }
	    #msgtableHead {
		    font-weight: bold;
	    }
	    #msgtable td {
		    border: 0;
		    margin: 0;
		    padding: 0px 5px 0px 5px;
	    }
	    .timetd {
		    width: 60px;
	    }
	    #msgtable td.nicktd {
		    width: 100px;
		    text-align: right;
		    border-right: 1px #555 dashed;
	    }
	    .light {
		    background-color: #ccc;
	    }
	    .dark {
		    background-color: #eee;
	    }
    </style>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
	  <a href="/zeromq-irclog/index.html"><h1 id="project_title">Zeromq-irclog</h1></a>
          <h2 id="project_tagline">IRC Log repository for ZeroMQ</h2>

        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section class="inner">

      <p>These logs have been collected from the <a href="https://webchat.freenode.net/?randomnick=1&amp;channels=%23zeromq&amp;uio=d4" target="_blank">#zeromq</a> IRC channel on Freenode.</p>

      </section>
<div id="msgtablediv">
<div><a href="/zeromq-irclog/logs/index.html">Home</a>&nbsp;&gt;&nbsp;<a href="/zeromq-irclog/logs/2013/09/index.html">Sep 2013</a></div>
<h3 id="titleDate" data-time="1379593801">Thursday September 19th 2013</h3>
<table id="msgtable">
<tr id="msgtableHead"><td>Time*</td><td>Nickname</td><td>Message</td></tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-1">[<span class="ts" data-time="1379556313">00:12</span>]</a></td><td class="nicktd">meretrix</td>
		<td class="msgtd">If I have a basic Pub-Sub setup and a Sub disconnects and stays disconnected&comma; won&apos;t the Pub start eating memory until it crashes by caching all messages because the default HWM is unlimited&quest;</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-2">[<span class="ts" data-time="1379573015">00:12</span>]</a></td><td class="nicktd">bob&UnderBar;</td>
		<td class="msgtd">Hi i have read from the zeromq guide about the fast box implementation wherein a subscriber pushes down to its workers&comma; but i am unable to implement it&comma; my code works when it only has a zmq.SUB socket but when i add a zmq.PUSH socket it doesnt work</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-3">[<span class="ts" data-time="1379573141">00:12</span>]</a></td><td class="nicktd">bob&UnderBar;</td>
		<td class="msgtd">my OS is CENTOS 6.2 and using pyzmq</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-4">[<span class="ts" data-time="1379577159">00:12</span>]</a></td><td class="nicktd">artem-v</td>
		<td class="msgtd">hello there zmq masters</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-5">[<span class="ts" data-time="1379577332">00:12</span>]</a></td><td class="nicktd">artem-v</td>
		<td class="msgtd">have question. i&apos;m using zmq-3.2.2 and jzmq 2.2.1 on windows 7. my appl. need to create &lpar;and destroy&rpar; a lot of inproc sockets&comma; but when it&apos;s doing this jvm just abruptly exits </td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-6">[<span class="ts" data-time="1379577417">00:12</span>]</a></td><td class="nicktd">artem-v</td>
		<td class="msgtd">though&comma; i did read the guide and stackoverflow and seems like that zmq claims that inproc is cheap. if that&apos;s the case&comma; then why sockets are not disposed when they are closed</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-7">[<span class="ts" data-time="1379582985">00:13</span>]</a></td><td class="nicktd">cremes</td>
		<td class="msgtd">meretrix: no&comma; the default HWM hasn&apos;t been unlimited since a much earlier release &lpar;2.x.something&rpar;. With the 3.x series the HWM is 1000.</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-8">[<span class="ts" data-time="1379589918">00:13</span>]</a></td><td class="nicktd">mhk</td>
		<td class="msgtd">Is it possible there are some memory leaks in czmq&quest;</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-9">[<span class="ts" data-time="1379590018">00:13</span>]</a></td><td class="nicktd">mhk</td>
		<td class="msgtd">Only looks like a few bytes every time I handle the incoming data.</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-10">[<span class="ts" data-time="1379591557">00:13</span>]</a></td><td class="nicktd">timemage</td>
		<td class="msgtd">mhk&comma; you&apos;ve run it through valgrind&quest;</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-11">[<span class="ts" data-time="1379591653">00:13</span>]</a></td><td class="nicktd">mhk</td>
		<td class="msgtd">timemage: My code seems to leak memory but I can&apos;t figure out where</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-12">[<span class="ts" data-time="1379591668">00:13</span>]</a></td><td class="nicktd">timemage</td>
		<td class="msgtd">mhk&comma; i got that part</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-13">[<span class="ts" data-time="1379591679">00:13</span>]</a></td><td class="nicktd">mhk</td>
		<td class="msgtd">I&apos;m on it</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-14">[<span class="ts" data-time="1379591704">00:13</span>]</a></td><td class="nicktd">mhk</td>
		<td class="msgtd">But if someone says &quot;Yeah&comma; there are memleaks&quot; I would have stopped my inquiry :D</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-15">[<span class="ts" data-time="1379591743">00:13</span>]</a></td><td class="nicktd">timemage</td>
		<td class="msgtd">mhk&comma; i haven&apos;t used czmq.  just for the hell of it&comma; i&apos;m compiling it now.</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-16">[<span class="ts" data-time="1379591856">00:13</span>]</a></td><td class="nicktd">timemage</td>
		<td class="msgtd">mhk&comma; if you have a testcase i can compile and run here&comma; i&apos;ll look at it.   how are you determining that you&apos;re leaking&quest;</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-17">[<span class="ts" data-time="1379591908">00:13</span>]</a></td><td class="nicktd">mhk</td>
		<td class="msgtd">RES in top</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-18">[<span class="ts" data-time="1379591956">00:13</span>]</a></td><td class="nicktd">mhk</td>
		<td class="msgtd">And valgrind under Mac OS X is FUBAR</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-19">[<span class="ts" data-time="1379592127">00:13</span>]</a></td><td class="nicktd">taotetek</td>
		<td class="msgtd">mhk: are you using the recommended suppression file for czmq&quest;</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-20">[<span class="ts" data-time="1379592160">00:13</span>]</a></td><td class="nicktd">mhk</td>
		<td class="msgtd">taotetek: Nope&comma; where can I find it&quest;</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-21">[<span class="ts" data-time="1379592209">00:13</span>]</a></td><td class="nicktd">taotetek</td>
		<td class="msgtd">mhk: a few bytes each time you receive a message&quest; no insult meant by asking the obvious - but are you freeing your received message / frames when you&apos;re done handling&quest;</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-22">[<span class="ts" data-time="1379592234">00:13</span>]</a></td><td class="nicktd">taotetek</td>
		<td class="msgtd"><a href="http://zeromq.org/docs:using-valgrind">http://zeromq.org/docs:using-valgrind</a></td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-23">[<span class="ts" data-time="1379592334">00:13</span>]</a></td><td class="nicktd">mhk</td>
		<td class="msgtd">taotetek: Yeah&comma; this one I got hold of. I&apos;m testing with 10MB&comma; this one I should definitively see. &semi;&rpar;</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-24">[<span class="ts" data-time="1379592422">00:13</span>]</a></td><td class="nicktd">taotetek</td>
		<td class="msgtd">mhk: I got stuck yesterday on a memory leak and ended up slapping myself on the head later because I was calling free to free a zmsg&UnderBar;t instead of zmsg&UnderBar;destroy</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-25">[<span class="ts" data-time="1379592554">00:13</span>]</a></td><td class="nicktd">taotetek</td>
		<td class="msgtd">one of those fun ones where you read it 100x without noticing it at the end of the day and then go &quot;DOH&quot; &semi;&rpar;</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-26">[<span class="ts" data-time="1379592704">00:13</span>]</a></td><td class="nicktd">mhk</td>
		<td class="msgtd">&equals;&equals;2539&equals;&equals; 224 bytes in 4 blocks are definitely lost in loss record 52 of 79</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-27">[<span class="ts" data-time="1379592704">00:13</span>]</a></td><td class="nicktd">mhk</td>
		<td class="msgtd">&equals;&equals;2539&equals;&equals;    at 0x4A08121: calloc &lpar;in /usr/lib64/valgrind/vgpreload&UnderBar;memcheck-amd64-linux.so&rpar;</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-28">[<span class="ts" data-time="1379592707">00:13</span>]</a></td><td class="nicktd">mhk</td>
		<td class="msgtd">&equals;&equals;2539&equals;&equals;    by 0x4E7A968: zframe&UnderBar;new &lpar;czmq&UnderBar;prelude.h:443&rpar;</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-29">[<span class="ts" data-time="1379592710">00:13</span>]</a></td><td class="nicktd">mhk</td>
		<td class="msgtd">&equals;&equals;2539&equals;&equals;    by 0x4E7AB48: zframe&UnderBar;recv &lpar;zframe.c:156&rpar;</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-30">[<span class="ts" data-time="1379592712">00:13</span>]</a></td><td class="nicktd">mhk</td>
		<td class="msgtd">&equals;&equals;2539&equals;&equals;    by 0x4E7ED84: zmsg&UnderBar;recv &lpar;zmsg.c:101&rpar;</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-31">[<span class="ts" data-time="1379592725">00:13</span>]</a></td><td class="nicktd">mhk</td>
		<td class="msgtd">This would actually match the leak I saw before in top</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-32">[<span class="ts" data-time="1379592729">00:13</span>]</a></td><td class="nicktd">mhk</td>
		<td class="msgtd">&lpar;roughly&rpar;</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-33">[<span class="ts" data-time="1379592738">00:13</span>]</a></td><td class="nicktd">taotetek</td>
		<td class="msgtd">mhk: are you calling zframe&UnderBar;destroy later on that frame&quest;</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-34">[<span class="ts" data-time="1379592779">00:13</span>]</a></td><td class="nicktd">mhk</td>
		<td class="msgtd">taotetek: No&comma; I call zmsg&UnderBar;destroy</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-35">[<span class="ts" data-time="1379592878">00:13</span>]</a></td><td class="nicktd">mhk</td>
		<td class="msgtd">zmsg&UnderBar;t &midast;m &equals; zmsg&UnderBar;recv&lpar;sock&rpar;&semi;</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-36">[<span class="ts" data-time="1379592879">00:13</span>]</a></td><td class="nicktd">mhk</td>
		<td class="msgtd">assert&lpar;m&rpar;&semi;</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-37">[<span class="ts" data-time="1379592879">00:13</span>]</a></td><td class="nicktd">mhk</td>
		<td class="msgtd">char &midast;msgData &equals; zframe&UnderBar;strdup&lpar;zmsg&UnderBar;pop&lpar;m&rpar;&rpar;&semi;</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-38">[<span class="ts" data-time="1379592879">00:13</span>]</a></td><td class="nicktd">mhk</td>
		<td class="msgtd">zmsg&UnderBar;destroy&lpar;&amp;m&rpar;&semi;</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-39">[<span class="ts" data-time="1379592879">00:13</span>]</a></td><td class="nicktd">mhk</td>
		<td class="msgtd">dosomethingwith&lpar;msgData&rpar;&semi;</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-40">[<span class="ts" data-time="1379593031">00:13</span>]</a></td><td class="nicktd">taotetek</td>
		<td class="msgtd">so for each zmsg&UnderBar;t you create in a recv loop you&apos;ll want to call zmsg&UnderBar;destroy&comma; for each zframe&comma; zframe&UnderBar;destroy&comma; and of course you&apos;ll want to free the msgData you strdup&apos;d out of the frame when you&apos;re doing with it</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-41">[<span class="ts" data-time="1379593042">00:13</span>]</a></td><td class="nicktd">taotetek</td>
		<td class="msgtd">those are the things I&apos;d guess without looking at your code</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-42">[<span class="ts" data-time="1379593056">00:13</span>]</a></td><td class="nicktd">mhk</td>
		<td class="msgtd">That&apos;s what I do</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-43">[<span class="ts" data-time="1379593067">00:13</span>]</a></td><td class="nicktd">taotetek</td>
		<td class="msgtd">yeah then I&apos;m out of guesses at the moment </td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-44">[<span class="ts" data-time="1379593176">00:13</span>]</a></td><td class="nicktd">taotetek</td>
		<td class="msgtd">gah. I&apos;m also out of guesses as to where I put my AC adapter.</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-45">[<span class="ts" data-time="1379593218">00:13</span>]</a></td><td class="nicktd">mhk</td>
		<td class="msgtd">.oO&lpar; Bah&comma; I only leak like &mldr; 57 Bytes &mldr; who cares&excl; &rpar;</td>
	</tr>
</table>
<p id="timeinfo">*Times are in UTC</p>
</div>
<script src="/zeromq-irclog/javascripts/time.js"></script>
    </div>


    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Zeromq-irclog maintained by <a href="https://github.com/porjo">porjo</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
