<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Zeromq-irclog : IRC Log repository for ZeroMQ" />

    <link rel="stylesheet" type="text/css" media="screen" href="/zeromq-irclog/stylesheets/stylesheet.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.1.0/moment.min.js"></script>

    <title>Zeromq-irclog</title>

    <style>
	    #msgtablediv {
		margin-left: 20px;
		margin-right: 20px;
	    }
	    #msgtable {
		    width: 100%;
		    border: 0;
		    padding: 0;
	    }
	    #msgtableHead {
		    font-weight: bold;
	    }
	    #msgtable td {
		    border: 0;
		    margin: 0;
		    padding: 0px 5px 0px 5px;
	    }
	    .timetd {
		    width: 60px;
	    }
	    #msgtable td.nicktd {
		    text-align: right;
		    border-right: 1px #555 dashed;
		    font-weight: bold;
	    }
	    .light {
		    background-color: #ccc;
	    }
	    .dark {
		    background-color: #eee;
	    }
    </style>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
	  <a href="/zeromq-irclog/index.html"><h1 id="project_title">Zeromq-irclog</h1></a>
          <h2 id="project_tagline">IRC Log repository for ZeroMQ</h2>

        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section class="inner">

      <p>These logs have been collected from the <a href="https://webchat.freenode.net/?randomnick=1&amp;channels=%23zeromq&amp;uio=d4" target="_blank">#zeromq</a> IRC channel on Freenode.</p>

      </section>
<div id="msgtablediv">
<div><a href="/zeromq-irclog/index.html">Home</a>&nbsp;&gt;&nbsp;<a href="/zeromq-irclog/logs/2013/12/index.html">Dec 2013</a></div>
<h3 id="titleDate" data-time="1387319401">Tuesday December 17th 2013</h3>
<table id="msgtable">
<tr id="msgtableHead"><td>Time*</td><td>Nickname</td><td>Message</td></tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-1">[<span class="ts" data-time="1387289639">02:21</span>]</a></td><td class="nicktd" style="color: violet">taotetek</td>
		<td class="msgtd">hello pieterh &excl; welcome back to irc.</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-2">[<span class="ts" data-time="1387290026">02:21</span>]</a></td><td class="nicktd" style="color: magenta">pieterh</td>
		<td class="msgtd"><strong>taotetek:</strong> hi there, I&apos;ve been on the road for a couple of weeks</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-3">[<span class="ts" data-time="1387290164">02:21</span>]</a></td><td class="nicktd" style="color: magenta">pieterh</td>
		<td class="msgtd">four days of &quot;is this a bug&quot; and after 30 seconds of looking at the code, the answer is &quot;yes, in your code&quot;</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-4">[<span class="ts" data-time="1387290711">02:21</span>]</a></td><td class="nicktd" style="color: violet">taotetek</td>
		<td class="msgtd"><strong>pieterh:</strong> hah</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-5">[<span class="ts" data-time="1387290737">02:21</span>]</a></td><td class="nicktd" style="color: magenta">pieterh</td>
		<td class="msgtd">we should make a captcha-based discussion forum</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-6">[<span class="ts" data-time="1387290751">02:21</span>]</a></td><td class="nicktd" style="color: magenta">pieterh</td>
		<td class="msgtd">where entry requires the pasting of a single piece of sane, original code</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-7">[<span class="ts" data-time="1387290835">02:21</span>]</a></td><td class="nicktd" style="color: violet">taotetek</td>
		<td class="msgtd">I never understand the reluctance to provide a code snippet - if someone offers to debug my code for free for me, and all I have to do is send them a snippet, I&apos;m all over that.</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-8">[<span class="ts" data-time="1387291273">02:21</span>]</a></td><td class="nicktd" style="color: magenta">pieterh</td>
		<td class="msgtd">well, looked like I was too harsh there, the code is fine</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-9">[<span class="ts" data-time="1387291296">02:21</span>]</a></td><td class="nicktd" style="color: violet">taotetek</td>
		<td class="msgtd">it happens :)</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-10">[<span class="ts" data-time="1387291316">02:21</span>]</a></td><td class="nicktd" style="color: violet">taotetek</td>
		<td class="msgtd">the thread was getting a bit irritating with how long it went on without an example.</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-11">[<span class="ts" data-time="1387306658">02:21</span>]</a></td><td class="nicktd" style="color: blue">agronholm</td>
		<td class="msgtd"><strong>pieterh:</strong> could I have confirmation for LIBZMQ-590&quest; <a href="https://zeromq.jira.com/browse/LIBZMQ-590">https://zeromq.jira.com/browse/LIBZMQ-590</a></td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-12">[<span class="ts" data-time="1387306664">02:21</span>]</a></td><td class="nicktd" style="color: blue">agronholm</td>
		<td class="msgtd">so that I&apos;m not completely off base...</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-13">[<span class="ts" data-time="1387306710">02:21</span>]</a></td><td class="nicktd" style="color: blue">agronholm</td>
		<td class="msgtd">if tcp keepalives worked on all platforms, it would essentially remove the need for the heartbeat commands in the ZMTP protocol</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-14">[<span class="ts" data-time="1387308585">02:21</span>]</a></td><td class="nicktd" style="color: darksalmon">offby1</td>
		<td class="msgtd">gonna ask a FAQ of my own, I bet:</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-15">[<span class="ts" data-time="1387308625">02:21</span>]</a></td><td class="nicktd" style="color: darksalmon">offby1</td>
		<td class="msgtd">The docs spell out the &quot;slow joiner&quot; problem in great detail.  I am experiencing something similar, and am curious if it&apos;s the same thing.  In my case, I&apos;ve got a SUB socket that has connected to an XPUB&semi; the XPUB is &quot;related to&quot; an XSUB by dint of them both being passed to a call to &Oslash;MQ.proxy (in a separate process)&semi; and I&apos;ve got a PUB that&apos;s connected to the XSUB. (I assume this is a common pattern). Anyway: even if the SUB connects</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-16">[<span class="ts" data-time="1387308625">02:21</span>]</a></td><td class="nicktd" style="color: darksalmon">offby1</td>
		<td class="msgtd">first, I often lose the first message or two. So: is this just another manifestation of the &quot;slow joiner&quot; problem&quest;</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-17">[<span class="ts" data-time="1387312216">02:21</span>]</a></td><td class="nicktd" style="color: darkorange">diehard2</td>
		<td class="msgtd">hello everyone, I&apos;m seeing extremely high cpu usage on occasion from one of my processes. The stacktrace when I pause shows</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-18">[<span class="ts" data-time="1387312219">02:21</span>]</a></td><td class="nicktd" style="color: darkorange">diehard2</td>
		<td class="msgtd">&num;0  0x000000393eadf253 in poll () from /lib64/libc.so.6 &num;1  0x00007f6f3c383211 in zmq::signaler&UnderBar;t::wait (this&equals;&lt;value optimized out&gt;,     timeout&UnderBar;&equals;&lt;value optimized out&gt;) at signaler.cpp:145 &num;2  0x00007f6f3c3789fa in zmq::mailbox&UnderBar;t::recv (this&equals;0x2aad418,     cmd&UnderBar;&equals;0x7fffeb876b90, timeout&UnderBar;&equals;&lt;value optimized out&gt;) at mailbox.cpp:74 &num;3  0x00007f6f3c383fab in zmq::socket&UnderBar;base&UnderBar;t::process&UnderBar;commands (     this&equals;0x2aad190, timeout&UnderBar;&equals;&lt;value optimiz</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-19">[<span class="ts" data-time="1387312232">02:21</span>]</a></td><td class="nicktd" style="color: darkorange">diehard2</td>
		<td class="msgtd">so, it looks like something in poll</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-20">[<span class="ts" data-time="1387312240">02:21</span>]</a></td><td class="nicktd" style="color: darkorange">diehard2</td>
		<td class="msgtd">I don&apos;t have anything else going on</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-21">[<span class="ts" data-time="1387312245">02:21</span>]</a></td><td class="nicktd" style="color: darkorange">diehard2</td>
		<td class="msgtd">does anyone know what might cause this&quest;</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-22">[<span class="ts" data-time="1387312337">02:21</span>]</a></td><td class="nicktd" style="color: olive">Toba</td>
		<td class="msgtd">timeout is optimized out</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-23">[<span class="ts" data-time="1387312348">02:21</span>]</a></td><td class="nicktd" style="color: olive">Toba</td>
		<td class="msgtd">and that&apos;s not the whole stacktrace</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-24">[<span class="ts" data-time="1387312349">02:21</span>]</a></td><td class="nicktd" style="color: olive">Toba</td>
		<td class="msgtd">use pastebin</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-25">[<span class="ts" data-time="1387312379">02:21</span>]</a></td><td class="nicktd" style="color: darkorange">diehard2</td>
		<td class="msgtd">sorry</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-26">[<span class="ts" data-time="1387312417">02:21</span>]</a></td><td class="nicktd" style="color: darkorange">diehard2</td>
		<td class="msgtd"><strong>http:</strong>//pastebin.com/GKqSd7gU</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-27">[<span class="ts" data-time="1387312421">02:21</span>]</a></td><td class="nicktd" style="color: darkorange">diehard2</td>
		<td class="msgtd">I&apos;m on zeromq 3.2.3</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-28">[<span class="ts" data-time="1387312444">02:21</span>]</a></td><td class="nicktd" style="color: olive">Toba</td>
		<td class="msgtd">did you even verify that the zeromq thread is the one using the cpu&quest;</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-29">[<span class="ts" data-time="1387312574">02:21</span>]</a></td><td class="nicktd" style="color: darkorange">diehard2</td>
		<td class="msgtd">there&apos;s only one thread</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-30">[<span class="ts" data-time="1387312602">02:21</span>]</a></td><td class="nicktd" style="color: olive">Toba</td>
		<td class="msgtd">you&apos;re wrong</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-31">[<span class="ts" data-time="1387312608">02:21</span>]</a></td><td class="nicktd" style="color: olive">Toba</td>
		<td class="msgtd">zeromq has its own threadpool</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-32">[<span class="ts" data-time="1387312625">02:21</span>]</a></td><td class="nicktd" style="color: olive">Toba</td>
		<td class="msgtd">what os is this on</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-33">[<span class="ts" data-time="1387312630">02:21</span>]</a></td><td class="nicktd" style="color: olive">Toba</td>
		<td class="msgtd">linux&quest;</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-34">[<span class="ts" data-time="1387312640">02:21</span>]</a></td><td class="nicktd" style="color: darkorange">diehard2</td>
		<td class="msgtd">yes, redhat. my stacktrace shows main</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-35">[<span class="ts" data-time="1387312642">02:21</span>]</a></td><td class="nicktd" style="color: red">SanityIO</td>
		<td class="msgtd">Hi all&excl;</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-36">[<span class="ts" data-time="1387312657">02:21</span>]</a></td><td class="nicktd" style="color: olive">Toba</td>
		<td class="msgtd">did you attach with gdb on the command line</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-37">[<span class="ts" data-time="1387312662">02:21</span>]</a></td><td class="nicktd" style="color: darkorange">diehard2</td>
		<td class="msgtd">yes</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-38">[<span class="ts" data-time="1387312699">02:21</span>]</a></td><td class="nicktd" style="color: olive">Toba</td>
		<td class="msgtd">paste your &apos;info threads&apos;</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-39">[<span class="ts" data-time="1387312710">02:21</span>]</a></td><td class="nicktd" style="color: red">SanityIO</td>
		<td class="msgtd">Can someone please suggest me a correct way to do fork() with pyzmq&quest;</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-40">[<span class="ts" data-time="1387312710">02:21</span>]</a></td><td class="nicktd" style="color: olive">Toba</td>
		<td class="msgtd">I really am betting you have more than 1 and just don&apos;t know it</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-41">[<span class="ts" data-time="1387312723">02:21</span>]</a></td><td class="nicktd" style="color: olive">Toba</td>
		<td class="msgtd"><strong>SanityIO:</strong> what are you trying to do&quest;</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-42">[<span class="ts" data-time="1387312735">02:21</span>]</a></td><td class="nicktd" style="color: darkorange">diehard2</td>
		<td class="msgtd"><strong>http:</strong>//pastebin.com/rHCZZZBd</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-43">[<span class="ts" data-time="1387312765">02:21</span>]</a></td><td class="nicktd" style="color: olive">Toba</td>
		<td class="msgtd">are you sure you timed this to the time when cpu usage was &apos;extremely high&apos;&quest;</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-44">[<span class="ts" data-time="1387312771">02:21</span>]</a></td><td class="nicktd" style="color: olive">Toba</td>
		<td class="msgtd">and didn&apos;t miss it by 20ms or something&quest;</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-45">[<span class="ts" data-time="1387312793">02:21</span>]</a></td><td class="nicktd" style="color: olive">Toba</td>
		<td class="msgtd">because all those threads are probably doing 0 cpu use right there</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-46">[<span class="ts" data-time="1387312805">02:21</span>]</a></td><td class="nicktd" style="color: red">SanityIO</td>
		<td class="msgtd">I am trying to get clean child without any zmq sockets or context&semi; my scenario - parent uses zerorpc and forks child where zmq should not be used</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-47">[<span class="ts" data-time="1387312808">02:21</span>]</a></td><td class="nicktd" style="color: darkorange">diehard2</td>
		<td class="msgtd">i restarted and paused several times. I know this is caveman debuggings</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-48">[<span class="ts" data-time="1387312811">02:21</span>]</a></td><td class="nicktd" style="color: darkorange">diehard2</td>
		<td class="msgtd">-s</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-49">[<span class="ts" data-time="1387312821">02:21</span>]</a></td><td class="nicktd" style="color: darkorange">diehard2</td>
		<td class="msgtd">but I&apos;m having trouble reproducing it</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-50">[<span class="ts" data-time="1387312832">02:21</span>]</a></td><td class="nicktd" style="color: olive">Toba</td>
		<td class="msgtd">I don&apos;t know what to tell you then</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-51">[<span class="ts" data-time="1387312887">02:21</span>]</a></td><td class="nicktd" style="color: red">SanityIO</td>
		<td class="msgtd">Toba, what is a correct way of closing context and zmq sockets in child process&quest; (If there is any)</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-52">[<span class="ts" data-time="1387312927">02:21</span>]</a></td><td class="nicktd" style="color: olive">Toba</td>
		<td class="msgtd">the context is a threadpool</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-53">[<span class="ts" data-time="1387312933">02:21</span>]</a></td><td class="nicktd" style="color: olive">Toba</td>
		<td class="msgtd">the threads will not be running in a child process</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-54">[<span class="ts" data-time="1387312942">02:21</span>]</a></td><td class="nicktd" style="color: darkorange">diehard2</td>
		<td class="msgtd">thanks for taking a stab at it Toba</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-55">[<span class="ts" data-time="1387312945">02:21</span>]</a></td><td class="nicktd" style="color: darkorange">diehard2</td>
		<td class="msgtd">I appreciate it</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-56">[<span class="ts" data-time="1387312950">02:21</span>]</a></td><td class="nicktd" style="color: olive">Toba</td>
		<td class="msgtd"><strong>SanityIO:</strong> are you forking and executing or just forking&quest;</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-57">[<span class="ts" data-time="1387312960">02:21</span>]</a></td><td class="nicktd" style="color: darkorange">diehard2</td>
		<td class="msgtd">when we figure it out, we&apos;ll update you guys if it&apos;s zeromq</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-58">[<span class="ts" data-time="1387312961">02:21</span>]</a></td><td class="nicktd" style="color: olive">Toba</td>
		<td class="msgtd"><strong>diehard2:</strong> good luck</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-59">[<span class="ts" data-time="1387313001">02:21</span>]</a></td><td class="nicktd" style="color: red">SanityIO</td>
		<td class="msgtd">well i hoped to just fork(), but from what you said - it is seems I should always execve</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-60">[<span class="ts" data-time="1387313083">02:21</span>]</a></td><td class="nicktd" style="color: olive">Toba</td>
		<td class="msgtd">well</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-61">[<span class="ts" data-time="1387313086">02:21</span>]</a></td><td class="nicktd" style="color: olive">Toba</td>
		<td class="msgtd">what is the goal</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-62">[<span class="ts" data-time="1387313089">02:21</span>]</a></td><td class="nicktd" style="color: olive">Toba</td>
		<td class="msgtd">what is your end goal</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-63">[<span class="ts" data-time="1387313100">02:21</span>]</a></td><td class="nicktd" style="color: olive">Toba</td>
		<td class="msgtd">you&apos;re telling me an intermediate requirement butn ot what the point of this is</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-64">[<span class="ts" data-time="1387313103">02:21</span>]</a></td><td class="nicktd" style="color: olive">Toba</td>
		<td class="msgtd">why are you forking in the first place</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-65">[<span class="ts" data-time="1387313361">02:21</span>]</a></td><td class="nicktd" style="color: red">SanityIO</td>
		<td class="msgtd">Toba, ok, end goal - a small rpc system in python that is capable of executing long runnign detached daemons. Something like rpc&UnderBar;inetd - a daemon that spawn new daemons. And spawned daemons should also do a little reatbeating. spawned daemons may run for days and master inet&UnderBar;rpcd should not be blocked from restarting because of this. I choosed zerorpc for this and server and actually code is 1 screen.</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-66">[<span class="ts" data-time="1387313472">02:21</span>]</a></td><td class="nicktd" style="color: olive">Toba</td>
		<td class="msgtd">reatbeating&quest;</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-67">[<span class="ts" data-time="1387313474">02:21</span>]</a></td><td class="nicktd" style="color: olive">Toba</td>
		<td class="msgtd">what&apos;s a reatbeat&quest;</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-68">[<span class="ts" data-time="1387313500">02:21</span>]</a></td><td class="nicktd" style="color: red">SanityIO</td>
		<td class="msgtd">sorry typo - heartbeating</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-69">[<span class="ts" data-time="1387313534">02:21</span>]</a></td><td class="nicktd" style="color: olive">Toba</td>
		<td class="msgtd">why are you writing a long running process manager in pythong&quest;</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-70">[<span class="ts" data-time="1387313536">02:21</span>]</a></td><td class="nicktd" style="color: olive">Toba</td>
		<td class="msgtd">&midast;python</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-71">[<span class="ts" data-time="1387313576">02:21</span>]</a></td><td class="nicktd" style="color: red">SanityIO</td>
		<td class="msgtd">I am a little bothered about 2 issues: 1) possible assert aborts() because of zeroprc code or gevent magic will allow to run zmq socket in first fork (i use fock - then daemon.DaemonContext() then exec) and 2) loss of possibility to fork in client code.. the client code is actually bloated application</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-72">[<span class="ts" data-time="1387313585">02:21</span>]</a></td><td class="nicktd" style="color: darkmagenta">DanielHolth</td>
		<td class="msgtd">lie supervisord</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-73">[<span class="ts" data-time="1387313616">02:21</span>]</a></td><td class="nicktd" style="color: olive">Toba</td>
		<td class="msgtd"><strong>https:</strong>//trac.torproject.org/projects/tor/ticket/2029 </td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-74">[<span class="ts" data-time="1387313618">02:21</span>]</a></td><td class="nicktd" style="color: olive">Toba</td>
		<td class="msgtd">may be related</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-75">[<span class="ts" data-time="1387313621">02:21</span>]</a></td><td class="nicktd" style="color: olive">Toba</td>
		<td class="msgtd">idea of how to do this</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-76">[<span class="ts" data-time="1387313667">02:21</span>]</a></td><td class="nicktd" style="color: red">SanityIO</td>
		<td class="msgtd">Toba, what so bad about python&quest; The service is going to be very low loaded. </td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-77">[<span class="ts" data-time="1387313700">02:21</span>]</a></td><td class="nicktd" style="color: olive">Toba</td>
		<td class="msgtd">call me old school, but I would use c or c&plus;&plus; to write this</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-78">[<span class="ts" data-time="1387313713">02:21</span>]</a></td><td class="nicktd" style="color: olive">Toba</td>
		<td class="msgtd">I write python every day, I have no objection to it whatsoever</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-79">[<span class="ts" data-time="1387313725">02:21</span>]</a></td><td class="nicktd" style="color: olive">Toba</td>
		<td class="msgtd">but I don&apos;t think it&apos;s the best tool for the job</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-80">[<span class="ts" data-time="1387313733">02:21</span>]</a></td><td class="nicktd" style="color: olive">Toba</td>
		<td class="msgtd">perhaps because I wrote a zeromq-controlled process manager in c&plus;&plus; once :p</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-81">[<span class="ts" data-time="1387313757">02:21</span>]</a></td><td class="nicktd" style="color: red">SanityIO</td>
		<td class="msgtd">Well actually I am not concerned about clos-on-exec because I am using daemonization to spawn child-daemons and that will close all fds before my exec</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-82">[<span class="ts" data-time="1387313775">02:21</span>]</a></td><td class="nicktd" style="color: olive">Toba</td>
		<td class="msgtd">then why did you bring that up </td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-83">[<span class="ts" data-time="1387313779">02:21</span>]</a></td><td class="nicktd" style="color: olive">Toba</td>
		<td class="msgtd">since you don&apos;t have the issue you&apos;re asking about</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-84">[<span class="ts" data-time="1387313798">02:21</span>]</a></td><td class="nicktd" style="color: olive">Toba</td>
		<td class="msgtd">daemonization does a fork and exec internally you know..</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-85">[<span class="ts" data-time="1387313872">02:21</span>]</a></td><td class="nicktd" style="color: olive">Toba</td>
		<td class="msgtd">zeromq already does FD&UnderBar;CLOEXEC internally anyway</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-86">[<span class="ts" data-time="1387313876">02:21</span>]</a></td><td class="nicktd" style="color: olive">Toba</td>
		<td class="msgtd">see ip.cpp line 61</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-87">[<span class="ts" data-time="1387313916">02:21</span>]</a></td><td class="nicktd" style="color: red">SanityIO</td>
		<td class="msgtd">I understand you C love, but i am in hurry for this. (besides the fact that noone in my team will not understand why C for this) well I saw assertition error when i did gevent.sleep() just after first manual fork() .. that was obviously my intenton to check what will happen and bad things happened :)</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-88">[<span class="ts" data-time="1387313957">02:21</span>]</a></td><td class="nicktd" style="color: olive">Toba</td>
		<td class="msgtd">gevent uses all kinds of monkey patching </td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-89">[<span class="ts" data-time="1387313992">02:21</span>]</a></td><td class="nicktd" style="color: red">SanityIO</td>
		<td class="msgtd">My qusetion actually: what should I do just after fork() in python to get clean child</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-90">[<span class="ts" data-time="1387314027">02:21</span>]</a></td><td class="nicktd" style="color: olive">Toba</td>
		<td class="msgtd">If you had a grasp of the things you will need to know to do what you are doing, then everything I&apos;ve said would make sense already</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-91">[<span class="ts" data-time="1387314034">02:21</span>]</a></td><td class="nicktd" style="color: olive">Toba</td>
		<td class="msgtd">the sockets should be closed already</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-92">[<span class="ts" data-time="1387314039">02:21</span>]</a></td><td class="nicktd" style="color: olive">Toba</td>
		<td class="msgtd">zeromq does that on its sockets</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-93">[<span class="ts" data-time="1387314045">02:21</span>]</a></td><td class="nicktd" style="color: red">SanityIO</td>
		<td class="msgtd">well yes, but i think scenario was that gevent.sleep() switched to other green thread that was doing zmq socket io</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-94">[<span class="ts" data-time="1387314046">02:21</span>]</a></td><td class="nicktd" style="color: olive">Toba</td>
		<td class="msgtd">i&apos;ve never seen a world where a fork does not stop other threads</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-95">[<span class="ts" data-time="1387314063">02:21</span>]</a></td><td class="nicktd" style="color: olive">Toba</td>
		<td class="msgtd">you could stop using gevent without understanding how it works</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-96">[<span class="ts" data-time="1387314072">02:21</span>]</a></td><td class="nicktd" style="color: olive">Toba</td>
		<td class="msgtd">you didn&apos;t even bring it up until 30 minutes into the conversation</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-97">[<span class="ts" data-time="1387314075">02:21</span>]</a></td><td class="nicktd" style="color: olive">Toba</td>
		<td class="msgtd">and it changes the picture a lot</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-98">[<span class="ts" data-time="1387314079">02:21</span>]</a></td><td class="nicktd" style="color: olive">Toba</td>
		<td class="msgtd">I&apos;m done helping, best of luck</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-99">[<span class="ts" data-time="1387314699">02:21</span>]</a></td><td class="nicktd" style="color: darkcyan">minrk</td>
		<td class="msgtd"><strong>Toba:</strong> the tricky bit with gevent is there are no actual threads</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-100">[<span class="ts" data-time="1387314755">02:21</span>]</a></td><td class="nicktd" style="color: darkcyan">minrk</td>
		<td class="msgtd">that&apos;s kind of the point of it, and also the source of many of the problems working with it (e.g. fork doesn&apos;t treat green threads in the same way it does true threads)</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-101">[<span class="ts" data-time="1387315007">02:21</span>]</a></td><td class="nicktd" style="color: olive">Toba</td>
		<td class="msgtd">yeah</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-102">[<span class="ts" data-time="1387315009">02:21</span>]</a></td><td class="nicktd" style="color: olive">Toba</td>
		<td class="msgtd">that is what i mean</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-103">[<span class="ts" data-time="1387315016">02:21</span>]</a></td><td class="nicktd" style="color: olive">Toba</td>
		<td class="msgtd">he should understand gevent better</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-104">[<span class="ts" data-time="1387315036">02:21</span>]</a></td><td class="nicktd" style="color: red">SanityIO</td>
		<td class="msgtd"><strong>minrk:</strong> i have no problems with gevent, btw there is gevent.fork() that is doing reinitialization of hub after fork, anyway assertition error is raised because python zmq.ctx is used in child process, and i am asking how to avoid it</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-105">[<span class="ts" data-time="1387315122">02:21</span>]</a></td><td class="nicktd" style="color: red">SanityIO</td>
		<td class="msgtd">gevent is not black magic, it is just green threads &plus; some wraps around socket to make greens switch when they are going to block</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-106">[<span class="ts" data-time="1387315484">02:21</span>]</a></td><td class="nicktd" style="color: red">SanityIO</td>
		<td class="msgtd">btw, thanks for supervisord hint&excl;</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-107">[<span class="ts" data-time="1387315489">02:21</span>]</a></td><td class="nicktd" style="color: violet">michaelgreene</td>
		<td class="msgtd">Anyone here use the Poller in NetMQ&quest;  Anytime I shut down my server C-based libzmq REP sockets with corresponding REQ sockets attached and previously working in the NetMQ side under a poller, I get an assertion that blows up my .NET runtime in Poller.Loop() -&gt; TcpConnector.InEvent() -&gt; TcpConnector.OutEvent() -&gt; TcpConnector.Connect()</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-108">[<span class="ts" data-time="1387315815">02:21</span>]</a></td><td class="nicktd" style="color: violet">michaelgreene</td>
		<td class="msgtd">I &midast;think&midast; I just need to get rid of the call to Debug.Assert in NetMQ&apos;s TcpConnector.cs because it seems like it will do the right thing if I bubble up NULL.</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-109">[<span class="ts" data-time="1387315864">02:21</span>]</a></td><td class="nicktd" style="color: violet">michaelgreene</td>
		<td class="msgtd">But it seems bizarre that nobody else would have seen this before.  That Debug.Assert was added 11 months ago in 904b23f71ffe113eac5441c6039e333582386cf9</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-110">[<span class="ts" data-time="1387316109">02:21</span>]</a></td><td class="nicktd" style="color: violet">taotetek</td>
		<td class="msgtd"><strong>michaelgreene:</strong> sorry - never used NetMQ&excl;</td>
	</tr>
</table>
<p id="timeinfo">*Times are in UTC</p>
</div>
<script src="/zeromq-irclog/javascripts/time.js"></script>
    </div>


    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Zeromq-irclog maintained by <a href="https://github.com/porjo">porjo</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
