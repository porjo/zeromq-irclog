<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Zeromq-irclog : IRC Log repository for ZeroMQ" />

    <link rel="stylesheet" type="text/css" media="screen" href="/zeromq-irclog/stylesheets/stylesheet.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.1.0/moment.min.js"></script>

    <title>Zeromq-irclog</title>

    <style>
	    #msgtablediv {
		margin-left: 20px;
		margin-right: 20px;
	    }
	    #msgtable {
		    width: 100%;
		    border: 0;
		    padding: 0;
	    }
	    #msgtableHead {
		    font-weight: bold;
	    }
	    #msgtable td {
		    border: 0;
		    margin: 0;
		    padding: 0px 5px 0px 5px;
	    }
	    .timetd {
		    width: 60px;
	    }
	    #msgtable td.nicktd {
		    width: 100px;
		    text-align: right;
		    border-right: 1px #555 dashed;
		    font-weight: bold;
	    }
	    .light {
		    background-color: #ccc;
	    }
	    .dark {
		    background-color: #eee;
	    }
    </style>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
	  <a href="/zeromq-irclog/index.html"><h1 id="project_title">Zeromq-irclog</h1></a>
          <h2 id="project_tagline">IRC Log repository for ZeroMQ</h2>

        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section class="inner">

      <p>These logs have been collected from the <a href="https://webchat.freenode.net/?randomnick=1&amp;channels=%23zeromq&amp;uio=d4" target="_blank">#zeromq</a> IRC channel on Freenode.</p>

      </section>
<div id="msgtablediv">
<div><a href="/zeromq-irclog/logs/index.html">Home</a>&nbsp;&gt;&nbsp;<a href="/zeromq-irclog/logs/2013/10/index.html">Oct 2013</a></div>
<h3 id="titleDate" data-time="1382720401">Friday October 25th 2013</h3>
<table id="msgtable">
<tr id="msgtableHead"><td>Time*</td><td>Nickname</td><td>Message</td></tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-1">[<span class="ts" data-time="1382711323">01:05</span>]</a></td><td class="nicktd" style="color: purple">ThomasLehmann</td>
		<td class="msgtd">Hi&comma; somebody around here&quest;</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-2">[<span class="ts" data-time="1382711474">01:05</span>]</a></td><td class="nicktd" style="color: purple">ThomasLehmann</td>
		<td class="msgtd">I need littel bit help/information for using zeromq ...</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-3">[<span class="ts" data-time="1382711501">01:05</span>]</a></td><td class="nicktd" style="color: darksalmon">cremes</td>
		<td class="msgtd">ThomasLehmann: just ask your question. If someone can answer it&comma; they will.</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-4">[<span class="ts" data-time="1382711512">01:05</span>]</a></td><td class="nicktd" style="color: purple">ThomasLehmann</td>
		<td class="msgtd">If you have several 100 threads &lpar;as an example&rpar; but you want to send via one socket only ...</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-5">[<span class="ts" data-time="1382711524">01:05</span>]</a></td><td class="nicktd" style="color: purple">ThomasLehmann</td>
		<td class="msgtd">I don&apos;t sure how this is done correctly.</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-6">[<span class="ts" data-time="1382711559">01:05</span>]</a></td><td class="nicktd" style="color: darksalmon">cremes</td>
		<td class="msgtd"><a href="http://zeromq.org/area:faq">http://zeromq.org/area:faq</a></td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-7">[<span class="ts" data-time="1382711564">01:05</span>]</a></td><td class="nicktd" style="color: darksalmon">cremes</td>
		<td class="msgtd">and search for thread</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-8">[<span class="ts" data-time="1382711572">01:05</span>]</a></td><td class="nicktd" style="color: purple">ThomasLehmann</td>
		<td class="msgtd">Creating threads with zmq&UnderBar;device connection inproc with the real socket&quest;</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-9">[<span class="ts" data-time="1382711612">01:05</span>]</a></td><td class="nicktd" style="color: purple">ThomasLehmann</td>
		<td class="msgtd">Creating threads with zmq&UnderBar;device connecting inproc sockets with the real socket&quest;</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-10">[<span class="ts" data-time="1382711612">01:05</span>]</a></td><td class="nicktd" style="color: darksalmon">cremes</td>
		<td class="msgtd">I don&apos;t understand the question</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-11">[<span class="ts" data-time="1382711629">01:05</span>]</a></td><td class="nicktd" style="color: darksalmon">cremes</td>
		<td class="msgtd">still don&apos;t understand</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-12">[<span class="ts" data-time="1382711719">01:05</span>]</a></td><td class="nicktd" style="color: purple">ThomasLehmann</td>
		<td class="msgtd">I have not found an example that explains how &quot;n&quot; threads communicate via one socket to a server</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-13">[<span class="ts" data-time="1382711751">01:05</span>]</a></td><td class="nicktd" style="color: purple">ThomasLehmann</td>
		<td class="msgtd">request and reply</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-14">[<span class="ts" data-time="1382711757">01:05</span>]</a></td><td class="nicktd" style="color: darksalmon">cremes</td>
		<td class="msgtd">ok</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-15">[<span class="ts" data-time="1382711771">01:05</span>]</a></td><td class="nicktd" style="color: darksalmon">cremes</td>
		<td class="msgtd">so you have 3 approaches that you can try</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-16">[<span class="ts" data-time="1382711788">01:05</span>]</a></td><td class="nicktd" style="color: darksalmon">cremes</td>
		<td class="msgtd">1. share a single socket amongst all threads. Protect it with a mutex or other full-memory barrier.</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-17">[<span class="ts" data-time="1382711801">01:05</span>]</a></td><td class="nicktd" style="color: purple">ThomasLehmann</td>
		<td class="msgtd">Understood</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-18">[<span class="ts" data-time="1382711820">01:05</span>]</a></td><td class="nicktd" style="color: darksalmon">cremes</td>
		<td class="msgtd">2. Create a socket per thread. Each socket can individually connect to the destination socket.</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-19">[<span class="ts" data-time="1382711840">01:05</span>]</a></td><td class="nicktd" style="color: purple">ThomasLehmann</td>
		<td class="msgtd">Well if you have 1000 threads then you have 1000 sockets.</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-20">[<span class="ts" data-time="1382711853">01:05</span>]</a></td><td class="nicktd" style="color: darksalmon">cremes</td>
		<td class="msgtd">3. Create a socket per thread and have then connect via inproc to a thread &plus; socket that is dedicated to communicating to your server.</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-21">[<span class="ts" data-time="1382711881">01:05</span>]</a></td><td class="nicktd" style="color: darksalmon">cremes</td>
		<td class="msgtd">Yes&comma; you might have 1000 sockets. I had a project that created over 30&UnderBar;000 sockets. It worked great.</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-22">[<span class="ts" data-time="1382711882">01:05</span>]</a></td><td class="nicktd" style="color: purple">ThomasLehmann</td>
		<td class="msgtd">How is this done &lpar;3&rpar;&quest;</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-23">[<span class="ts" data-time="1382711898">01:05</span>]</a></td><td class="nicktd" style="color: darksalmon">cremes</td>
		<td class="msgtd">For 3....</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-24">[<span class="ts" data-time="1382711916">01:05</span>]</a></td><td class="nicktd" style="color: darkviolet">pimeys</td>
		<td class="msgtd">just put some more ulimit there :&rpar;</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-25">[<span class="ts" data-time="1382711929">01:05</span>]</a></td><td class="nicktd" style="color: darkviolet">pimeys</td>
		<td class="msgtd">christ&comma; our servers are really using those sockets</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-26">[<span class="ts" data-time="1382711966">01:05</span>]</a></td><td class="nicktd" style="color: darksalmon">cremes</td>
		<td class="msgtd">create a thread and a socket and have it bind to an inproc address. create a second socket in this thread and have it connect to your server. As messages come in on the inproc socket from other threads&comma; resend them to the server.</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-27">[<span class="ts" data-time="1382711976">01:05</span>]</a></td><td class="nicktd" style="color: darksalmon">cremes</td>
		<td class="msgtd">It&apos;s essentially a facy zmq&UnderBar;proxy.</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-28">[<span class="ts" data-time="1382711998">01:05</span>]</a></td><td class="nicktd" style="color: darksalmon">cremes</td>
		<td class="msgtd">zmq&UnderBar;device &lpar;the name&rpar; has been changed to zmq&UnderBar;proxy. there should be code examples in the repository showing its use.</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-29">[<span class="ts" data-time="1382712027">01:05</span>]</a></td><td class="nicktd" style="color: purple">ThomasLehmann</td>
		<td class="msgtd">But as I understood ... zmq&UnderBar;device &lpar;proxy&rpar; does not return unless ...</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-30">[<span class="ts" data-time="1382712045">01:05</span>]</a></td><td class="nicktd" style="color: purple">ThomasLehmann</td>
		<td class="msgtd">Per thread&quest;</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-31">[<span class="ts" data-time="1382712048">01:05</span>]</a></td><td class="nicktd" style="color: darksalmon">cremes</td>
		<td class="msgtd">correct&comma; this thread will loop forever</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-32">[<span class="ts" data-time="1382712078">01:05</span>]</a></td><td class="nicktd" style="color: darksalmon">cremes</td>
		<td class="msgtd">You will only have &midast;one&midast; zmq&UnderBar;proxy running in its own thread. You are &midast;not&midast; creating a zmq&UnderBar;proxy per thread.</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-33">[<span class="ts" data-time="1382712090">01:05</span>]</a></td><td class="nicktd" style="color: purple">ThomasLehmann</td>
		<td class="msgtd">How will zmq know that thread 123 should receive the response&quest;</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-34">[<span class="ts" data-time="1382712139">01:05</span>]</a></td><td class="nicktd" style="color: darksalmon">cremes</td>
		<td class="msgtd">If you are using DEALER/ROUTER sockets in the proxy&comma; it knows how to route back to the originating socket. Have you read the zguide yet&quest; </td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-35">[<span class="ts" data-time="1382712149">01:05</span>]</a></td><td class="nicktd" style="color: darksalmon">cremes</td>
		<td class="msgtd">This is all explained very thoroughly in the documentation.</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-36">[<span class="ts" data-time="1382712176">01:05</span>]</a></td><td class="nicktd" style="color: purple">ThomasLehmann</td>
		<td class="msgtd">Have beein reading many things that you are no aware where to be in the forest :&rpar;</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-37">[<span class="ts" data-time="1382712327">01:05</span>]</a></td><td class="nicktd" style="color: purple">ThomasLehmann</td>
		<td class="msgtd">I will have a read again. Thank you so far.</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-38">[<span class="ts" data-time="1382712375">01:05</span>]</a></td><td class="nicktd" style="color: darksalmon">cremes</td>
		<td class="msgtd">sure&comma; glad to help.</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-39">[<span class="ts" data-time="1382716736">01:05</span>]</a></td><td class="nicktd" style="color: darkcyan">PSG&UnderBar;Sakari</td>
		<td class="msgtd">I have this multithreaded application where 1 thread periodically needs to notify all others of something that happened</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-40">[<span class="ts" data-time="1382716742">01:05</span>]</a></td><td class="nicktd" style="color: darkcyan">PSG&UnderBar;Sakari</td>
		<td class="msgtd">The right model for this is a pub/sub through ipc right &quest;</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-41">[<span class="ts" data-time="1382716750">01:05</span>]</a></td><td class="nicktd" style="color: darkcyan">PSG&UnderBar;Sakari</td>
		<td class="msgtd">With every thread making both a publisher and subscriber</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-42">[<span class="ts" data-time="1382717977">01:05</span>]</a></td><td class="nicktd" style="color: darkorange">guido&UnderBar;g</td>
		<td class="msgtd">why does every thread need a pub if only does the notification&quest;</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-43">[<span class="ts" data-time="1382717990">01:05</span>]</a></td><td class="nicktd" style="color: darkorange">guido&UnderBar;g</td>
		<td class="msgtd">why ipc and not inproc&quest;</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-44">[<span class="ts" data-time="1382718352">01:05</span>]</a></td><td class="nicktd" style="color: darkcyan">PSG&UnderBar;Sakari</td>
		<td class="msgtd">guido&UnderBar;g: any thread can notify all the other threads of something</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-45">[<span class="ts" data-time="1382718357">01:05</span>]</a></td><td class="nicktd" style="color: darkcyan">PSG&UnderBar;Sakari</td>
		<td class="msgtd">and yes&comma; inproc&comma; my bad</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-46">[<span class="ts" data-time="1382718407">01:05</span>]</a></td><td class="nicktd" style="color: darkorange">guido&UnderBar;g</td>
		<td class="msgtd">&quot;I have this multithreaded application where 1 thread periodically needs to notify all others of something that happened&quot;</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-47">[<span class="ts" data-time="1382718417">01:05</span>]</a></td><td class="nicktd" style="color: darkorange">guido&UnderBar;g</td>
		<td class="msgtd">then thats wrong</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-48">[<span class="ts" data-time="1382718434">01:05</span>]</a></td><td class="nicktd" style="color: darkcyan">PSG&UnderBar;Sakari</td>
		<td class="msgtd">Yeah&comma; it was an example&comma; &quot;1&quot; should&apos;ve been &quot;any&quot;&comma; apologies</td>
	</tr>
	<tr class="light">
		<td class="timetd"><a href="#msg-49">[<span class="ts" data-time="1382718682">01:05</span>]</a></td><td class="nicktd" style="color: darkorange">guido&UnderBar;g</td>
		<td class="msgtd">it&apos;s more along the line of: don&apos;t expect the right answer if you ask the wrong question</td>
	</tr>
	<tr class="dark">
		<td class="timetd"><a href="#msg-50">[<span class="ts" data-time="1382718701">01:05</span>]</a></td><td class="nicktd" style="color: darkorange">guido&UnderBar;g</td>
		<td class="msgtd">so given the above&comma; yes you approach is valid i&apos;d say</td>
	</tr>
</table>
<p id="timeinfo">*Times are in UTC</p>
</div>
<script src="/zeromq-irclog/javascripts/time.js"></script>
    </div>


    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Zeromq-irclog maintained by <a href="https://github.com/porjo">porjo</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
